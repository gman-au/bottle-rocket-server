@using Rocket.Web.Client
@inherits LayoutComponentBase
@inject IThemeService ThemeService

<PageTitle>Bottle Rocket</PageTitle>

<BottleRocketMudThemeProvider IsDarkMode="@ThemeService.IsDarkMode"/>
<MudDialogProvider/>
<MudPopoverProvider />
<MudSnackbarProvider/>

<style>
    @@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap');
    @@import url('https://fonts.googleapis.com/css2?family=Rubik');
    @@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro');
</style>

<MudLayout>
    <BottleRocketSidebar
        OnDarkModeToggle="@(_ => DarkToggle())"
        DarkMode="@ThemeService.IsDarkMode"/>
    <MudMainContent Class="pt-16 px-16">
        <MudContainer Class="mt-6">
            <CascadingValue Name="IsDarkMode" Value="@ThemeService.IsDarkMode">
                <ErrorBoundary @ref="_errorBoundary">
                    <ChildContent>
                        @Body
                    </ChildContent>
                    <ErrorContent Context="exception">
                        <Error ErrorBoundary="@_errorBoundary" Exception="@exception"/>
                    </ErrorContent>
                </ErrorBoundary>
            </CascadingValue>
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {

    private ErrorBoundary _errorBoundary;

    void DarkToggle()
    {
        ThemeService.ToggleDarkMode();
        StateHasChanged();
    }

}
