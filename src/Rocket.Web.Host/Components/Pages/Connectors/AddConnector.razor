@page "/MyConnectors/Add"
@using Rocket.Dropbox.Domain
@using Rocket.Gcp.Domain
@using Rocket.Notion.Domain
@using Rocket.Ollama.Domain
@inherits Rocket.Web.Host.Infrastructure.BaseSecureCancellableComponent

<MudPaper Class="p-4" elevation="2">
    <MudText
        Align="Align.Center"
        Color="Color.Primary"
        GutterBottom
        Typo="Typo.h4">
        Add New Connector
    </MudText>
    <MudGrid Justify="Justify.FlexStart" Class="pa-4">
        @foreach (var connectorTemplate in ConnectorTemplates)
        {
            <MudItem xs="12" sm="12" md="6" lg="4" xl="3">
                <MudCard Style="height:100%" Outlined>
                    <MudCardMedia
                        Image="@Assets[connectorTemplate.ImagePath]"
                        Height="100"
                    />
                    <MudCardContent>
                        <MudText Typo="Typo.h6">
                            @connectorTemplate.Name
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-end">
                        <MudButton
                            Variant="Variant.Text"
                            Color="Color.Success"
                            OnClick="@(() => NavigateToAddAsync(connectorTemplate.Href))">
                            + Add connector
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }
    </MudGrid>

</MudPaper>

@code {

    private static readonly List<ConnectorTemplate> ConnectorTemplates =
    [
        new()
        {
            Name = DropboxDomainConstants.ConnectorName,
            Href = "/MyConnector/Dropbox/Add",
            ImagePath = "/img/dropbox-logo.webp"
        },
        new()
        {
            Name = OllamaDomainConstants.ConnectorName,
            Href = "/MyConnector/Ollama/Add",
            ImagePath = "/img/ollama-logo.png"
        },
        new()
        {
            Name = NotionDomainConstants.ConnectorName,
            Href = "/MyConnector/Notion/Add",
            ImagePath = "/img/notion-logo.png"
        },
        new()
        {
            Name = GcpDomainConstants.ConnectorName,
            Href = "/MyConnector/Gcp/Add",
            ImagePath = "/img/gcp-logo.png"
        },
    ];

    private async Task NavigateToAddAsync(string href)
    {
        NavigationManager
            .NavigateTo(href);
    }

    private class ConnectorTemplate
    {
        public string Name { get; set; }

        public string Href { get; set; }

        public string ImagePath { get; set; }
    }

}