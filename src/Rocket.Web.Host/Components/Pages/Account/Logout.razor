@page "/logout"
@using Rocket.Interfaces
@inject IAuthenticationManager AuthenticationManager
@inject NavigationManager NavigationManager

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-16">
    <MudPaper Elevation="4" Class="pa-8" Style="text-align: center;">
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" Size="Size.Large" />
        <MudText Typo="Typo.h6" Class="mt-4">Logging out...</MudText>
    </MudPaper>
</MudContainer>

@code {
    protected override async Task OnInitializedAsync()
    {
        await 
            AuthenticationManager
                .LogoutAsync();
        
        // Small delay to ensure state propagates
        await 
            Task
                .Delay(100);
        
        // Redirect to login page
        NavigationManager
            .NavigateTo("/", forceLoad: true);
    }
}