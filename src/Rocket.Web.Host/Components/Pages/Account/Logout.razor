@page "/account/logout"
@using Rocket.Interfaces
@inject IAuthenticationManager AuthenticationManager
@inject NavigationManager NavigationManager

<MudPaper Elevation="4" Class="pa-8" Style="text-align: center;">
    <BottleRocketLoadingOverlay IsLoading="true">
        <MudText Typo="Typo.h6" Class="mt-4">Logging out...</MudText>
    </BottleRocketLoadingOverlay>
</MudPaper>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await
                AuthenticationManager
                    .LogoutAsync();

            // Small delay to ensure storage operation completes
            await
                Task
                    .Delay(1000);

            // Redirect to login page
            NavigationManager
                .NavigateTo(
                    "/",
                    forceLoad: true
                );
        }

        await 
            base
                .OnAfterRenderAsync(firstRender);
    }

}